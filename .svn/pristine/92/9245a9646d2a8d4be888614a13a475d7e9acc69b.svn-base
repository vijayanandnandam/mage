/* Added by Paresh 01062017 for SIA modification for soptrfnum */
ALTER TABLE `FCSIA`
  ADD COLUMN `SIASOPTRFNUM` BIGINT(20) NOT NULL AFTER `SIASMTRFNUM`;

ALTER TABLE `FCSIA`
  DROP FOREIGN KEY `FK_FCSIA_FCSMT`;
ALTER TABLE `FCSIA`
  ADD INDEX `FK_FCSIA_FCSMT_idx` (`SIASMTRFNUM` ASC),
  ADD INDEX `FK_FCSIA_FCSOPT_idx` (`SIASOPTRFNUM` ASC),
  ADD UNIQUE INDEX `UNQ_FCSIA_SMT_SOPT` (`SIASMTRFNUM` ASC, `SIASOPTRFNUM` ASC, `SIAIMTRFNUM` ASC, `SIATXNTYPE` ASC),
  DROP INDEX `UNQ_SMT_IMT_TXNTYPE` ;
ALTER TABLE `FCSIA`
  ADD CONSTRAINT `FK_FCSIA_FCSMT`
FOREIGN KEY (`SIASMTRFNUM`)
REFERENCES `FCSMT` (`SMTRFNUM`)
  ON DELETE NO ACTION
  ON UPDATE NO ACTION,
  ADD CONSTRAINT `FK_FCSIA_FCSOPT`
FOREIGN KEY (`SIASOPTRFNUM`)
REFERENCES `FCSOPT` (`SOPTRFNUM`)
  ON DELETE NO ACTION
  ON UPDATE NO ACTION;

UPDATE `FCSIA` SET `SIASOPTRFNUM`='116223', `SIASMTRFNUM`='3490' WHERE `SIARFNUM`='1';
UPDATE `FCSIA` SET `SIASOPTRFNUM`='106485', `SIASMTRFNUM`='1198' WHERE `SIARFNUM`='2';

ALTER TABLE `FCMER`
  ADD COLUMN `MERSTARTDATE` DATE NOT NULL AFTER `MERTOSOPTRFNUM`;

/*Added by Sumit on 05062017 for FRL modification*/
ALTER TABLE FCFRL
  ADD UNIQUE INDEX FRL_FILEPATH_UNQ (FRLFILEPATH ASC);

/*Updated by sumit on 06-06-2017 for FCCTMT modification*/

ALTER TABLE `FCSIP`
  CHANGE COLUMN `SIPSOTRFNUM` `SIPSOTRFNUM` BIGINT(20) NULL ,
  CHANGE COLUMN `SIPFOMTRFNUM` `SIPFOMTRFNUM` BIGINT(20) NULL ;

/*Added by sumit on 07-06-2017 for FCFHT and FCFHS modification*/
ALTER TABLE `FCFHT`
  ADD COLUMN `FHTRTASYSTEMATICREF` CHAR(20) NULL AFTER `FHTSTATUS`;
ALTER TABLE `FCFHS`
  ADD COLUMN `FHSRTASYSTEMATICREF` CHAR(20) NULL AFTER `FHSEXITLOAD`;


/*Added systematic plan master, sumit on 08-06-2017*/
INSERT INTO `FCSPSM`(`SPSMRFNUM`,`SPSMNAME`,`SPSMACTIVE`,`SPSMDESCRIPTION`,`SPSMDISPLAYNAME`,`SPSMTOOLTIP`,`CREATEDATE`,`MODIFYDATE`,`CREATEDBY`,`LASTMODIFIEDBY`) VALUES(1,'REGISTERED','Y','','Registered','',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP,'admin','admin');
INSERT INTO `FCSPSM`(`SPSMRFNUM`,`SPSMNAME`,`SPSMACTIVE`,`SPSMDESCRIPTION`,`SPSMDISPLAYNAME`,`SPSMTOOLTIP`,`CREATEDATE`,`MODIFYDATE`,`CREATEDBY`,`LASTMODIFIEDBY`) VALUES(2,'CANCELLED','Y','','Cancelled','',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP,'admin','admin');
INSERT INTO `FCSPSM`(`SPSMRFNUM`,`SPSMNAME`,`SPSMACTIVE`,`SPSMDESCRIPTION`,`SPSMDISPLAYNAME`,`SPSMTOOLTIP`,`CREATEDATE`,`MODIFYDATE`,`CREATEDBY`,`LASTMODIFIEDBY`) VALUES(3,'ONGOING ','Y','','Active','',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP,'admin','admin');
INSERT INTO `FCSPSM`(`SPSMRFNUM`,`SPSMNAME`,`SPSMACTIVE`,`SPSMDESCRIPTION`,`SPSMDISPLAYNAME`,`SPSMTOOLTIP`,`CREATEDATE`,`MODIFYDATE`,`CREATEDBY`,`LASTMODIFIEDBY`) VALUES(4,'TERMINATED','Y','','Terminated','',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP,'admin','admin');
INSERT INTO `FCSPSM`(`SPSMRFNUM`,`SPSMNAME`,`SPSMACTIVE`,`SPSMDESCRIPTION`,`SPSMDISPLAYNAME`,`SPSMTOOLTIP`,`CREATEDATE`,`MODIFYDATE`,`CREATEDBY`,`LASTMODIFIEDBY`) VALUES(5,'UNDER_PROCESS','Y','','Processing','',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP,'admin','admin');
INSERT INTO `FCSPSM`(`SPSMRFNUM`,`SPSMNAME`,`SPSMACTIVE`,`SPSMDESCRIPTION`,`SPSMDISPLAYNAME`,`SPSMTOOLTIP`,`CREATEDATE`,`MODIFYDATE`,`CREATEDBY`,`LASTMODIFIEDBY`) VALUES(6,'CLOSED ','Y','','Closed','',CURRENT_TIMESTAMP,CURRENT_TIMESTAMP,'admin','admin');

/* Added by Paresh for product solutions update */
INSERT INTO `fincash_prod`.`FCLPSA` (`LPSAPSTRFNUM`, `LPSASMTRFNUM`, `LPSASEQUENCENO`, `LPSAINVESTMENTMODE`, `LPSASOPTRFNUM`, `CREATEDBY`, `LASTMODIFIEDBY`) VALUES ('3', '1198', '2', 'L', '106485', 'admin', 'admin');

