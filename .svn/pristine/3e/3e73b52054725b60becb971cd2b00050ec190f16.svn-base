UPDATE FCOSTM set OSTMTOSTATES = '2,13,16' where OSTMRFNUM =1;
UPDATE FCOSTM set OSTMTOSTATES = '3,4,7,10' where OSTMRFNUM =2;
UPDATE FCOSTM set OSTMTOSTATES = '4' where OSTMRFNUM =3;
UPDATE FCOSTM set OSTMTOSTATES = '6' where OSTMRFNUM =4;
UPDATE FCOSTM set OSTMTOSTATES = '14' where OSTMRFNUM =6;
UPDATE FCOSTM set OSTMTOSTATES = '9,13' where OSTMRFNUM =8;
UPDATE FCOSTM set OSTMTOSTATES = '11,12,13' where OSTMRFNUM =9;
UPDATE FCOSTM set OSTMTOSTATES = '3,4' where OSTMRFNUM =10;
UPDATE FCOSTM set OSTMTOSTATES = '12' where OSTMRFNUM =11;
UPDATE FCOSTM set OSTMTOSTATES = '6' where OSTMRFNUM =14;
UPDATE FCOSTM set OSTMTOSTATES = '6' where OSTMRFNUM =16;

ALTER TABLE `FCSDT` ADD COLUMN `SDTIMTRFNUM` BIGINT(20) NULL AFTER `SDTRFNUM`;

/* Create Primary Keys, Indexes, Uniques, Checks */

ALTER TABLE `FCSDT`
 ADD INDEX `IXFK_FCSDT_FCIMT` (`SDTIMTRFNUM` ASC)
;

/* Create Foreign Key Constraints */

ALTER TABLE `FCSDT`
 ADD CONSTRAINT `FK_FCSDT_FCIMT`
	FOREIGN KEY (`SDTIMTRFNUM`) REFERENCES `FCIMT` (`IMTRFNUM`) ON DELETE Restrict ON UPDATE Restrict
;

/*Added by sumit on 15062017 to modify SIP tables*/
SET FOREIGN_KEY_CHECKS=0
;

/* Drop Tables */

DROP TABLE IF EXISTS `FCSIP` CASCADE
;

/* Create Tables */

CREATE TABLE `FCSIP`
(
	`SIPRFNUM` BIGINT NOT NULL AUTO_INCREMENT,
	`SIPSTARTDATE` DATE NOT NULL,
	`SIPENDDATE` DATE 	 NULL,
	`SIPINSTALLMENTAMOUNT` DOUBLE NOT NULL,
	`SIPFREQUENCY` CHAR(2) NOT NULL COMMENT 'Weekly (w) Monthly (M) Quarterly (Q) Half-Yearly (H) Yearly (Y)',
	`SIPNOOFINSTALLMENTS` INT NOT NULL,
	`SIPSTATUS` BIGINT NOT NULL COMMENT 'Canceled Active',
	`SIPEXTERNALID` VARCHAR(16) 	 NULL,
	`SIPDEDUCTIONDAY` INT 	 NULL,
	`SIPSOTRFNUM` BIGINT 	 NULL,
	`SIPFOMTRFNUM` BIGINT 	 NULL,
	`SIPTERMINATIONDATE` DATE 	 NULL,
	`SIPREGISTRATIONDATE` DATE NOT NULL,
	`SIPRTAREGSLNO` VARCHAR(64) 	 NULL COMMENT 'RTA Registration Serial No.',
	`SIPRTATXNTYPE` VARCHAR(16) 	 NULL,
	`CREATEDATE` TIMESTAMP NULL DEFAULT '2017-01-01 00:00:01',
	`MODIFYDATE` TIMESTAMP NOT NULL DEFAULT current_timestamp,
	`CREATEDBY` CHAR(64) NOT NULL,
	`LASTMODIFIEDBY` CHAR(64) NOT NULL,
	CONSTRAINT `PK_FCSIP` PRIMARY KEY (`SIPRFNUM` ASC)
)
COMMENT='FCSIP: SIP Table'

;

/* Create Primary Keys, Indexes, Uniques, Checks */

ALTER TABLE `FCSIP`
 ADD INDEX `IXFK_FCSIP_FCSPSM` (`SIPSTATUS` ASC)
;

/* Create Foreign Key Constraints */

ALTER TABLE `FCSIP`
 ADD CONSTRAINT `FK_FCSIP_FCFOMT`
	FOREIGN KEY (`SIPFOMTRFNUM`) REFERENCES `FCFOMT` (`FOMTRFNUM`) ON DELETE Restrict ON UPDATE Restrict
;

ALTER TABLE `FCSIP`
 ADD CONSTRAINT `FK_FCSIP_FCSOT`
	FOREIGN KEY (`SIPSOTRFNUM`) REFERENCES `FCSOT` (`SOTRFNUM`) ON DELETE Restrict ON UPDATE Restrict
;

ALTER TABLE `FCSIP`
 ADD CONSTRAINT `FK_FCSIP_FCSPSM`
	FOREIGN KEY (`SIPSTATUS`) REFERENCES `FCSPSM` (`SPSMRFNUM`) ON DELETE Restrict ON UPDATE Restrict
;

SET FOREIGN_KEY_CHECKS=1
;